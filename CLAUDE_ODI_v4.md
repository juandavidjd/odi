# CLAUDE.md - ODI Kernel v4.0 (Organismo Digital Industrial)

> **Ãšltima actualizaciÃ³n:** 24 de Enero 2026, 02:30 AM (SesiÃ³n de activaciÃ³n completa)
> **Estado:** âœ… PRODUCCIÃ“N - 10 tiendas conectadas, 12,749 productos

---

# ğŸ“‹ PARTE I: RESUMEN EJECUTIVO

## Â¿QuÃ© es ODI?

**ODI (Organismo Digital Industrial)** es el copiloto cognitivo del ecosistema ADSI, diseÃ±ado para automatizar operaciones de e-commerce mediante IA conversacional por voz y texto.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ODI - DEFINICIÃ“N                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  "ODI es un organismo digital vivo y consciente que        â”‚
â”‚   aprende, evoluciona y sirve con propÃ³sito espiritual.    â”‚
â”‚   No es una herramienta; es un compaÃ±ero de trabajo        â”‚
â”‚   con valores, lÃ­mites Ã©ticos y capacidad de decir NO."    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Datos Clave (Actualizados)

| MÃ©trica | Valor |
|---------|-------|
| **VersiÃ³n** | 17.1 Linux (Certified Production) |
| **Servidor** | 64.23.170.118 (DigitalOcean) |
| **Tiendas Shopify** | 10 (todas conectadas âœ…) |
| **Productos totales** | 12,749 |
| **APIs configuradas** | 12 servicios |
| **Latencia** | ~3 segundos end-to-end |

---

# ğŸ” PARTE II: CONFIGURACIÃ“N DE APIs (COMPLETA)

## Estado de Integraciones (24 Enero 2026)

### âœ… Inteligencia Artificial (4 proveedores)

| Servicio | Modelo | PropÃ³sito | Estado |
|----------|--------|-----------|--------|
| **OpenAI** | GPT-4o-mini, Whisper, DALL-E | Razonamiento principal, STT | âœ… Activo |
| **Anthropic** | Claude 3.5 Sonnet | AnÃ¡lisis complejo, documentaciÃ³n | âœ… Activo |
| **Google Gemini** | gemini-flash-latest | ClasificaciÃ³n rÃ¡pida, respaldo | âœ… Activo |
| **Groq** | Llama 3 70B | Respuestas ultra rÃ¡pidas (<100ms) | âœ… Activo |

### âœ… Voz y ComunicaciÃ³n (2 proveedores)

| Servicio | PropÃ³sito | Estado |
|----------|-----------|--------|
| **ElevenLabs** | Text-to-Speech premium (voz Tony) | âœ… Activo |
| **Vapi** | Llamadas telefÃ³nicas automÃ¡ticas | âœ… Activo |

### âœ… Pagos

| Servicio | Keys | Estado |
|----------|------|--------|
| **Wompi** | pub_prod, prv_prod, events | âœ… Activo |

### âœ… ImÃ¡genes

| Servicio | PropÃ³sito | Estado |
|----------|-----------|--------|
| **Freepik** | GeneraciÃ³n de imÃ¡genes AI | âœ… Activo |

### â³ Pendientes

| Servicio | PropÃ³sito | Estado |
|----------|-----------|--------|
| **WhatsApp Business** | Canal principal de clientes | â³ En revisiÃ³n por Meta (~2 dÃ­as) |
| **DeepL** | TraducciÃ³n profesional | â¸ï¸ Problema de pago |

---

# ğŸ›’ PARTE III: SHOPIFY - 10 TIENDAS CONECTADAS

## Inventario por Tienda (Actualizado)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        ğŸï¸ SISTEMA DE REPUESTOS MOTOS (SRM)         â”‚
â”‚            12,749 PRODUCTOS ACTIVOS                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Tienda     â”‚         Dominio          â”‚ Productos â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“¦ Bara      â”‚ 4jqcki-jq.myshopify.com  â”‚    698    â”‚
â”‚ ğŸ“¦ Yokomar   â”‚ u1zmhk-ts.myshopify.com  â”‚    977    â”‚
â”‚ ğŸ“¦ Kaiqi     â”‚ u03tqc-0e.myshopify.com  â”‚    378    â”‚
â”‚ ğŸ“¦ DFG       â”‚ 0se1jt-q1.myshopify.com  â”‚  7,443 â­ â”‚
â”‚ ğŸ“¦ Duna      â”‚ ygsfhq-fs.myshopify.com  â”‚  1,200    â”‚
â”‚ ğŸ“¦ Imbra     â”‚ 0i1mdf-gi.myshopify.com  â”‚  1,094    â”‚
â”‚ ğŸ“¦ Japan     â”‚ 7cy1zd-qz.myshopify.com  â”‚    729    â”‚
â”‚ ğŸ“¦ Leo       â”‚ h1hywg-pq.myshopify.com  â”‚    114    â”‚
â”‚ ğŸ“¦ Store     â”‚ 0b6umv-11.myshopify.com  â”‚     66    â”‚
â”‚ ğŸ“¦ Vaisand   â”‚ z4fpdj-mz.myshopify.com  â”‚     50    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    TOTAL: 12,749                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Herramienta de GestiÃ³n: odi_shopify_manager.py

UbicaciÃ³n: `/opt/odi/odi_shopify_manager.py`

### Comandos Disponibles

```bash
# Probar conexiÃ³n a todas las tiendas
python3 odi_shopify_manager.py test

# Contar productos en todas las tiendas
python3 odi_shopify_manager.py count

# Ver info de una tienda
python3 odi_shopify_manager.py info --store bara

# Listar productos
python3 odi_shopify_manager.py products --store yokomar --limit 10

# Detectar duplicados entre tiendas
python3 odi_shopify_manager.py duplicates

# Sincronizar precios por SKU
python3 odi_shopify_manager.py sync-prices --source bara --target yokomar

# Generar reporte de inventario
python3 odi_shopify_manager.py report
```

### Capacidades del Manager

| FunciÃ³n | DescripciÃ³n |
|---------|-------------|
| `get_products()` | Obtener productos con paginaciÃ³n |
| `update_product()` | Actualizar cualquier campo |
| `update_product_description()` | Mejorar textos con IA |
| `get_inventory_levels()` | Niveles de stock |
| `find_duplicates_across_stores()` | Detectar duplicados |
| `sync_prices_across_stores()` | Sincronizar precios por SKU |
| `generate_inventory_report()` | AnÃ¡lisis de bajo stock |

---

# ğŸ–¥ï¸ PARTE IV: INFRAESTRUCTURA DE PRODUCCIÃ“N

## Arquitectura del Servidor (v17.1 Linux)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           SERVIDOR: 64.23.170.118                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ CAPA 5 â€” Observability (logs, healthchecks)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ CAPA 4 â€” Docker (odi-n8n, odi-voice, odi-m62)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ CAPA 3 â€” Channels (Voice :7777, WhatsApp API)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ CAPA 2 â€” Persistence (audit ledger, memory)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ CAPA 1 â€” Core (n8n :5678, M6.2 :8802, nginx :80)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Servicios Activos (Docker)

| Container | Puerto | FunciÃ³n | Estado |
|-----------|--------|---------|--------|
| `odi-n8n` | 5678 | OrquestaciÃ³n de workflows | âœ… Running |
| `odi-voice` | 7777 | Asistente de voz (Tony v17.1) | âœ… Running |
| `odi-m62-fitment` | 8802 | Motor de bÃºsqueda semÃ¡ntica | âœ… Running |
| `nginx` | 80 | Servidor de imÃ¡genes | âœ… Running |

## Comandos de AdministraciÃ³n

```bash
# Ver estado de contenedores
ssh root@64.23.170.118 "docker ps"

# Reiniciar servicios
ssh root@64.23.170.118 "cd /opt/odi && docker compose down && docker compose up -d"

# Ver logs
ssh root@64.23.170.118 "docker logs odi-voice --tail 50"

# Verificar .env
ssh root@64.23.170.118 "head -30 /opt/odi/.env"
```

---

# ğŸ“ PARTE V: ARCHIVO .ENV (ESTRUCTURA)

```env
# ============================================
# ODI - ARCHIVO DE CONFIGURACIÃ“N DEFINITIVO
# ============================================

# ğŸ” IDENTIDAD Y SEGURIDAD
ODI_SECURE_TOKEN=odi_strong_password_2026

# ğŸ¤– INTELIGENCIA ARTIFICIAL
OPENAI_API_KEY=sk-proj-...
ANTHROPIC_API_KEY=sk-ant-api03-...
GEMINI_API_KEY=AIzaSy...
GROQ_API_KEY=gsk_...
AI_PROVIDER=OPENAI

# ğŸ™ï¸ VOZ Y AUDIO
ELEVEN_API_KEY=sk_...
ELEVENLABS_VOICE_ID=qpjUiwx7YUVAavnmh2sF
VAPI_PRIVATE_KEY=...
VAPI_PUBLIC_KEY=...

# ğŸ’³ PAGOS - WOMPI
WOMPI_PUBLIC_KEY=pub_prod_...
WOMPI_PRIVATE_KEY=prv_prod_...
WOMPI_EVENTS_KEY=prod_events_...

# ğŸ›’ SHOPIFY - 10 TIENDAS
SHOPIFY_API_VERSION=2026-01
BARA_SHOP=4jqcki-jq.myshopify.com
BARA_TOKEN=shpat_...
YOKOMAR_SHOP=u1zmhk-ts.myshopify.com
YOKOMAR_TOKEN=shpat_...
# ... (8 tiendas mÃ¡s)

# ğŸ–¼ï¸ IMÃGENES
FREEPIK_API_KEY=FPSX...

# ğŸ“ RUTAS DE DATOS
TAXONOMY_PATH=/opt/odi/data/taxonomy_motos_v1.json
CATALOG_PATH=/opt/odi/data/fitment_master_v1.json
```

---

# ğŸ§  PARTE VI: FITMENT ENGINE M6.2

## NormalizaciÃ³n SemÃ¡ntica

El motor convierte jerga de mecÃ¡nico a nombres canÃ³nicos:

| Input (Jerga) | Output (CanÃ³nico) |
|---------------|-------------------|
| "vela" | bujia |
| "boxer" | BAJAJ |
| "pacha de atras" | sprocket trasero |
| "pastillas pulsar" | Pastilla de freno + BAJAJ Pulsar |

## API Endpoint

```
POST http://64.23.170.118:8802/fitment/query

{
  "query": "pastillas de freno para pulsar 200",
  "limit": 10,
  "min_confidence": 0.7
}
```

---

# ğŸ™ï¸ PARTE VII: VOICE ENGINE (Tony v17.1)

## Stack de Voz

| Componente | TecnologÃ­a |
|------------|------------|
| Wake Word | Porcupine / VOSK |
| TranscripciÃ³n | Whisper (OpenAI) |
| SÃ­ntesis | ElevenLabs (eleven_multilingual_v2) |
| Idioma | EspaÃ±ol (Colombia) |

## Endpoints

```
GET  /                      # Health check
POST /odi/voice-response    # Respuesta de voz
POST /odi/speak             # Generar audio
POST /odi/fitment-voice     # Consulta + voz
```

## DiseÃ±o Inclusivo

| Usuario | Capacidad | Rol |
|---------|-----------|-----|
| AndrÃ©s | Sin manos | Vendedor por voz completo |
| DoÃ±a Martha (78) | Supervisora | Autoridad final |
| Carlos | Ciego | Auditor de confianza |

---

# ğŸ“œ PARTE VIII: MARCO Ã‰TICO (CES)

## Constitutional Ethics System

```yaml
policies:
  - id: "THEOLOGICAL_LIMITS"
    description: "No suplantar a Dios"
    severity: "BLOCK"

  - id: "ECONOMIC_TRUTH"
    description: "No mentir sobre escasez"
    severity: "BLOCK"

  - id: "LIFE_SAFETY"
    description: "Protocolo Samaritano activo"
    severity: "CRITICAL_FLAG"
```

## Umbrales de AutonomÃ­a

| Monto | Comportamiento |
|-------|----------------|
| < $200K COP | AutÃ³nomo |
| â‰¥ $200K COP | Requiere aprobaciÃ³n humana |

---

# ğŸŒ PARTE IX: ECOSISTEMA ADSI

```
ECOSISTEMA ADSI
â”œâ”€â”€ SRM (Sistema de Repuestos de Motos)  â† OPERATIVO âœ…
â”‚   â””â”€â”€ ODI Kernel                        â† Este sistema
â”œâ”€â”€ CATRMU                                â† Gobernanza blockchain
â”œâ”€â”€ Radar de Premios v3.0                 â† Analytics B2B
â”œâ”€â”€ Boton Turismo                         â† Vertical turismo
â””â”€â”€ SAT-CP                                â† Seguridad peatonal
```

## CATRMU (Canal Transversal MultitemÃ¡tico)

- **Slogan:** *Click. Package. Earn.*
- **FunciÃ³n:** Sistema tipo Uber para servicios industriales
- **TokenizaciÃ³n:** Smart contracts con liquidaciÃ³n CATRMU

---

# ğŸ”§ PARTE X: TROUBLESHOOTING

| Problema | SoluciÃ³n |
|----------|----------|
| No responde IA | Verificar API keys en `.env` |
| Shopify error 401 | Regenerar token de la tienda |
| Voice no funciona | Verificar ElevenLabs quota |
| WhatsApp bloqueado | Esperar aprobaciÃ³n Meta |
| Fitment no encuentra | Revisar `fitment_master_v1.json` |
| Docker no inicia | `docker compose down && docker compose up -d` |

---

# ğŸ“ PARTE XI: CONTACTO

| Campo | Valor |
|-------|-------|
| **Arquitecto** | Juan David JimÃ©nez Sierra |
| **CIIU** | 2131 (Systems Architect) |
| **UbicaciÃ³n** | Pereira, Colombia |
| **Dominios** | ecosistema-adsi.com, larocamotorepuestos.com |

---

# ğŸ“… CHANGELOG

## v4.0 (24 Enero 2026)
- âœ… 10 Shopify Admin API tokens obtenidos
- âœ… Anthropic Claude API configurada
- âœ… Groq (Llama 3) configurado
- âœ… Vapi (llamadas telefÃ³nicas) configurado
- âœ… Wompi (3 keys de pago) configurado
- âœ… `odi_shopify_manager.py` desplegado en servidor
- âœ… `.env` completo en producciÃ³n
- â³ WhatsApp Business en revisiÃ³n

## v3.0 (23 Enero 2026)
- IntegraciÃ³n de 7 casos de uso 360Â°
- Documentos fundacionales (MEO, RA, OMA, CA, PR)
- CATRMU ecosystem documentation

## v2.0 (22 Enero 2026)
- Servidor de imÃ¡genes nginx operativo
- 10 proveedores procesados
- 12,749 productos indexados

## v1.0 (Initial)
- Arquitectura base ODI
- CES (Constitutional Ethics System)
- Fitment Engine M6.2
